# ResearcherRAG 개선 토론 노트 (2025-01)

## 배경
- 사용자와 Codex는 ResearcherRAG 프로젝트의 현 구조를 재검토하며 실 구현과 문서 간의 괴리를 확인.
- 최근 진행 중인 `AI failure_HR` 프로젝트에서 수집·분석한 PRISMA 프로토콜, BERTopic 기반 분류, HRM/HRD 비교 방법론을 ResearcherRAG에 접목하는 방안을 모색.

## 주요 문제 인식
1. **문서-코드 불일치**: 문서에서는 3개 RAG 모듈을 약속하지만 실제 레포는 문헌 모듈만 구현됨.
2. **데이터 품질 관리 부재**: PDF 업로드 후 즉시 임베딩하여 PRISMA 기준이나 중복 필터링이 없음.
3. **프롬프트 자산 관리**: `CLAUDE_CODE_PROMPTS.md`에 가이드만 존재하고 코드에서는 템플릿을 재사용하지 않음.
4. **테스트 공백**: `test_system.py` 단일 스크립트만 존재하여 회귀 방지가 어려움.
5. **UI/배포 전략 미정**: Gradio 데모에 의존하고, 연구자 협업을 위한 웹 프론트 전략이 부재.

## 개선 전략 합의안
- **구조 재정비**: `apps/` 디렉터리에 모듈별 구현을 분리하고, 공통 `core/`와 `data_pipeline/`을 도입하여 문서와 동일한 아키텍처 유지.
- **리서치 노트 모듈 우선 구축**: LangChain 기반 대화형 노트 RAG를 최소 실행 버전으로 구현하고, Markdown/Obsidian 노트를 ingest할 수 있는 파이프라인 작성.
- **PRISMA 파이프라인 도입**: `AI failure_HR`의 `PRISMAScreener` 클래스를 변형하여 자료 스크리닝을 자동화하고, RAG에 투입될 문헌/노트를 선별.
- **프롬프트 템플릿화**: `core/prompts/` 아래에서 기능별 프롬프트를 버전 관리하고 노드에서 import하여 재사용.
- **테스트 스위트 확장**: 모듈별 유닛/통합 테스트와 데이터 파이프라인 검증 테스트를 추가하여 CI 친화적 구조 확보.
- **프론트엔드/배포**: Gradio 프로토타입을 유지하되, 연구자 협업 UI는 React + Vercel + MCP 연동을 목표로 문서화.

## 향후 작업
1. 연구 노트 모듈 스켈레톤 생성 및 기본 ingestion/test 작성.
2. LangChain 기반 쿼리/요약 체인 구현과 메타데이터 필터 지원.
3. PRISMA 스크리닝 로직을 `data_pipeline/prisma.py`로 이식.
4. 프롬프트 템플릿을 코드 모듈로 정식화.
5. Vercel 프론트엔드 설계 문서 작성 및 팀 협업 시나리오 정의.

## Git 관련 메모
- 현재 Codex CLI는 외부 네트워크 접근이 제한되어 원격 저장소로의 `git push`는 수행할 수 없음.
- 로컬 변경 사항을 정리한 뒤 사용자가 직접 원격 저장소로 push해야 함.
